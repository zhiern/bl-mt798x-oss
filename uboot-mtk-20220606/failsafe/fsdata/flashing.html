<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8">
		<title>正在更新</title>
		<link rel="stylesheet" href="/style.css">
		<script src="/index.js"></script>
		<script>
			function init() {
				getversion()

				ajax({
					url: '/result',
					done: function(response) {
						if (response == 'failed') {
							location = '/fail.html'
							return
						}

						document.getElementById('title').innerHTML = '更新成功'
						document.getElementById('info').innerHTML = '你的设备更新成功!正在重启设备...'
					},
					timeout: 180000
				})
			}
		</script>
	</head>
	<body onload="init()">
		<div id="m">
			<h1 id="title">正在更新</h1>
			<p id="info">
				您的文件已成功上传!更新正在进行中，设备将自动重置<br>更新时间取决于更新文件大小，可能需要几分钟...
			</p>
			<div id="l"></div>
		</div>
        <div id="version"></div>
	</body>
</html>
